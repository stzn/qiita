  
# HEIFã¨ã¯ï¼Ÿ  
ã€ŒHigh Efficiency Image File Formatã€ã®ç•¥ã§  
MPEGã«ã‚ˆã£ã¦2013å¹´ã«é–‹ç™ºã•ã‚Œ  
H.265/MPEG-H HEVCã§åˆ©ç”¨ã•ã‚Œã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ã—ã¦  
æ¨™æº–åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚  
  
HEIF  
https://ja.wikipedia.org/wiki/High_Efficiency_Image_File_Format  
  
MPEG  
https://ja.wikipedia.org/wiki/Moving_Picture_Experts_Group  
  
HEVCã¯å‹•ç”»åœ§ç¸®è¦æ ¼ã®ä¸€ã¤ã§ã™ã€‚  
https://ja.wikipedia.org/wiki/H.265  
  
ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ãªã©ã®ã‚«ãƒ¡ãƒ©ã®æ€§èƒ½ãŒå‘ä¸Šã—ã¦ãã¦ã„ã‚‹ä¸­ã§  
ç”»åƒã‚„å‹•ç”»ã®ã‚µã‚¤ã‚ºã‚‚ã©ã‚“ã©ã‚“å¤§ãããªã‚Š  
ä¿å­˜ã™ã‚‹ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ç¢ºä¿ã™ã‚‹ã“ã¨ã‚‚  
ãã‚Œã«åˆã‚ã›ã¦ã©ã‚“ã©ã‚“é›£ã—ããªã£ã¦ãã¾ã—ãŸã€‚  
  
ãã‚“ãªä¸­ã§ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ç¯€ç´„ã§ãã‚‹ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨ã—ã¦  
HEIFã¯ç™»å ´ã—ã¦ãã¾ã—ãŸã€‚  
  
HEVCãã®ã‚‚ã®ã¯  
iOS9ã®ã¨ãã‹ã‚‰FaceTimeã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã—ãŸãŒ  
iOS11ã§AVFoundationã‚„Core Imageã¨ã„ã£ãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§  
HEIFãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã“ã¨ã«ã‚ˆã‚Š  
ã€Œã‚«ãƒ¡ãƒ©ã€ã‚„ã€Œå†™çœŸã€ãªã©ç”»åƒç³»ã‚¢ãƒ—ãƒªã§  
HEVCã«ã‚ˆã‚Šåœ§ç¸®ã•ã‚ŒãŸé™æ­¢ç”»ï¼å‹•ç”»ã‚’æ‰±ãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚  
  
iOSã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã‚‹åˆ¶ç´„ã‚‚ã‚ã‚Šã¾ã™ãŒ  
HEVCã®ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰/ãƒ‡ã‚³ãƒ¼ãƒ‰ã«ã¯é«˜ã„å‡¦ç†èƒ½åŠ›ãŒæ±‚ã‚ã‚‰ã‚Œã‚‹ãŸã‚  
iPhone7/7sä»¥é™ã§ãªã„ã¨å…¨æ©Ÿèƒ½ã‚’åˆ©ç”¨ã§ãã¾ã›ã‚“ã€‚  
  
**.heif**ã‚„**.heic**ã¨ã„ã†æ‹¡å¼µå­ã§  
HEIFã‚’åˆ©ç”¨ã—ã¾ã™ã€‚  
  
  
## HEIFã®ãƒ¡ãƒªãƒƒãƒˆ  
  
### å®¹é‡ã®å‰Šæ¸›  
  
é«˜ç”»è³ªã®ã¾ã¾ã§ç”»åƒã®å®¹é‡ãŒè»½ã  
JPEGã®åŠåˆ†ãã‚‰ã„ã®å®¹é‡ã«æŠ‘ãˆã‚‰ã‚Œã¾ã™ã€‚  
  
### ç”»åƒä»¥å¤–ã®æƒ…å ±ã®ä¿å­˜  
  
JPEGã®ã‚ˆã†ã«ä¸€æšã®ç”»åƒã‚’ä¿å­˜ã™ã‚‹ã ã‘ã§ã¯ãªã  
  
- Live Photoã®ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸ã‚·ãƒ¼ã‚±ãƒ³ã‚¹  
- æ·±åº¦ã‚„HDRãƒ‡ãƒ¼ã‚¿ãªã©ã®ä»˜åŠ æƒ…å ±  
- ä½ç½®ã‚„ã‚«ãƒ¡ãƒ©ãªã©ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿  
  
ãªã©ã‚‚ä¿å­˜ãŒã§ãã¾ã™ã€‚  
  
### ç”»åƒç·¨é›†æ©Ÿèƒ½  
  
ç”»åƒã®å‘ãã‚„ãƒˆãƒªãƒŸãƒ³ã‚°ã¨ã„ã£ãŸæ©Ÿèƒ½ã‚’åŸºæœ¬ã¨ã—ã¦å‚™ãˆã¦ãŠã‚Š  
ç·¨é›†æŒ‡ç¤ºã‚’ç”»åƒã¨åŒã˜ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã—ã¦ãŠãã“ã¨ã§  
ç·¨é›†å±¥æ­´ã‹ã‚‰ç”»åƒã‚’å…ƒã«æˆ»ã™ãªã©ã®æ“ä½œã‚‚å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚  
  
ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚·ãƒ¼ã‚±ãƒ³ã‚¹  
https://jp.mathworks.com/help/images/what-is-an-image-sequence.html  
  
## HEIFã®ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ  
  
### ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰/ãƒ‡ã‚³ãƒ¼ãƒ‰å‡¦ç†ã«æ™‚é–“ãŒã‹ã‹ã‚‹  
  
ä¸€æ–¹ã§HEIFã®å‡¦ç†ã«ã¯  
JPEGã‚ˆã‚Šæ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚  
  
  
# HEICã¨JPEGã‚’æ¯”è¼ƒã™ã‚‹  
  
ã¾ã iPhone 6sã¯iOS13ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã§ãã‚‹ã‚‚ã®ã®  
HEIFã®å…¨æ©Ÿèƒ½ã‚’åˆ©ç”¨å¯èƒ½ã«ãªã‚‹ãƒ‡ãƒã‚¤ã‚¹ã‚’ä½¿ç”¨ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãŒå¤§åŠã«ãªã‚‹ã¨è€ƒãˆã‚‰ã‚Œ  
ä¼šç¤¾ã®æ–¹é‡ã¨ã—ã¦ã‚‚  
ã‚¢ãƒ—ãƒªã¯æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®2ã¤å‰ã®iOS11ä»¥é™ã‚’ã‚µãƒãƒ¼ãƒˆå¯¾è±¡ã¨ã™ã‚‹ãŸã‚  
ã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°(iOS13æ­£å¼ãƒªãƒªãƒ¼ã‚¹æ™‚ç‚¹)ã§  
HEIFã«ã¤ã„ã¦æ”¹ã‚ã¦è¦‹ã¦ã¿ã¾ã—ãŸã€‚  
  
ä»Šå›ã¯ä¸‹è¨˜ã®ã‚ˆã†ãªç”»é¢ã‚’ä½¿ã£ã¦  
HEICã¨JPEGç”»åƒç”Ÿæˆæ™‚ã®  
å‡¦ç†æ™‚é–“ã‚„ã‚µã‚¤ã‚ºã‚’æ¯”è¼ƒã—ã¦ã¿ã¾ã—ãŸã€‚  
  
![Simulator Screen Shot - iPhone 11 Pro Max - 2019-10-05 at 12.02.31.png](/image/b14c54fc-7e57-c921-c034-f9d0a5697ed7.png)  
  
ç”»åƒã‚’é¸æŠã™ã‚‹ã¨HEICã¨JPEGã®ç”»åƒã‚’ä½œæˆã—  
åœ§ç¸®ã™ã‚‹æ™‚é–“ã¨ç”»åƒã‚µã‚¤ã‚ºã‚’å‡ºåŠ›ã™ã‚‹ã ã‘ã®ç°¡å˜ãªã‚‚ã®ã§ã™ã€‚  
  
# (è£œè¶³)HEICãƒ‡ãƒ¼ã‚¿ã®ä½œæˆæ–¹æ³•  
  
HEICã®ç”Ÿæˆã™ã‚‹ã«ã¯  
AVFoundationã‚’åˆ©ç”¨ã—ã¾ã™ã€‚  
  
```swift

enum HEICError: Error {
    case heicNotSupported
    case cgImageMissing
    case couldNotFinalize
}

extension UIImage {
    func heicData(compressionQuality: CGFloat) throws -> Data {
        let data = NSMutableData()
        guard let imageDestination =
            CGImageDestinationCreateWithData(
                data, AVFileType.heic as CFString, 1, nil
            ) else {
                throw HEICError.heicNotSupported
        }
        
        guard let cgImage = self.cgImage else {
            throw HEICError.cgImageMissing
        }
        
        let options: NSDictionary = [
            kCGImageDestinationLossyCompressionQuality: compressionQuality
        ]
        
        CGImageDestinationAddImage(imageDestination, cgImage, options)
        guard CGImageDestinationFinalize(imageDestination) else {
            throw HEICError.couldNotFinalize
        }
        return data as Data
    }
}
```  
  
`CGImageDestinationCreateWithData`ã®å¼•æ•°ã«  
`AVType.heic`ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§HEICã®ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚  
  
  
# æ¯”è¼ƒçµæœ  
  
ã¾ãšåœ§ç¸®ã—ãªã„çŠ¶æ…‹ã®çµæœã§ã™ã€‚  
  
![Simulator Screen Shot - iPhone 11 Pro Max - 2019-10-05 at 12.26.30.png](/image/539e34cb-1015-5564-3d68-6068bf811bae.png)  
  
  
åœ§ç¸®ã‚’ã—ãªã„çŠ¶æ…‹ã ã¨  
å®¹é‡ã‚‚HEICã®æ–¹ãŒå¤§ãããªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚  
  
ã„ãã¤ã‹ã®ç”»åƒã§è©¦ã—ã¾ã—ãŸãŒ  
å…¨ã¦åŒã˜çµæœã§ã—ãŸã€‚  
ã“ã‚Œã¯åœ§ç¸®ã—ãªã„ãŸã‚  
å†…éƒ¨ã§å‡¦ç†ãŒè¡Œã‚ã‚Œã¦ã„ãªã„ã®ã‹ãªã¨æ€ã£ã¦ã„ã¾ã™ğŸ¤”  
  
ã‚‚ã—ã”å­˜çŸ¥ã®æ–¹ã„ã‚‰ã£ã—ã‚ƒã„ã¾ã—ãŸã‚‰  
æ•™ãˆã¦ã„ãŸã ã‘ã‚‹ã¨ã†ã‚Œã—ã„ã§ã™ğŸ™‡ğŸ»â€â™‚ï¸  
  
å°‘ã—ã ã‘åœ§ç¸®ã™ã‚‹ã¨é€†è»¢ã—ã¾ã™ã€‚  
åŠåˆ†ã¨ã¾ã§ã¯ã„ãã¾ã›ã‚“ãŒå®¹é‡ã¯æ¸›ã‚Šã¾ã—ãŸã€‚  
  
![Simulator Screen Shot - iPhone 11 Pro Max - 2019-10-05 at 12.27.42.png](/image/a5192fb5-8ddc-cfc0-d2da-a37712b92477.png)  
  
  
åŠåˆ†ãã‚‰ã„ã«åœ§ç¸®ã—ã¦ã¿ã‚‹ã¨  
ã•ã‚‰ã«å®¹é‡ã«å·®ãŒå‡ºã¦ãã¾ã—ãŸã€‚  
  
![Simulator Screen Shot - iPhone 11 Pro Max - 2019-10-05 at 12.26.44.png](/image/1c209ed4-9631-7918-54ad-2cb2058346cf.png)  
  
20%ãã‚‰ã„ã«åœ§ç¸®ã—ã¦ã¿ã‚‹ã¨ã•ã‚‰ã«å®¹é‡ã«å·®ãŒå‡ºã¦ãã¾ã—ãŸã€‚  
  
![Simulator Screen Shot - iPhone 11 Pro Max - 2019-10-05 at 12.27.26.png](/image/a927f6ad-e249-f940-d95f-a14cd098a51a.png)  
  
  
# ã¾ã¨ã‚  
  
ä»Šå›è¦‹ã¦ããŸã“ã¨ã‹ã‚‰  
  
- åœ§ç¸®ã—ãªã„ã¨å®¹é‡ã¯å°ã•ããªã‚‰ãªã„  
- åœ§ç¸®ã™ã‚Œã°ã™ã‚‹ã»ã©JPEGã¨ã®å®¹é‡ã®å·®ã¯å¤§ãããªã‚‹  
  
ã¨ã„ã†çµæœã«ãªã‚Šã¾ã—ãŸã€‚  
  
æœ€å¤§ã§åŠåˆ†ãã‚‰ã„ã«å‰Šæ¸›ã•ã‚Œã‚‹ã¨ã„ã†è©±ã§ã—ãŸãŒ  
ä»Šå›ã®ã‚±ãƒ¼ã‚¹ã§ã¯ãã“ã¾ã§ã®å‰Šæ¸›ã¯è¦‹ã‚‰ã‚Œã¾ã›ã‚“ã§ã—ãŸã€‚  
ã‚‚ã—ã‹ã—ãŸã‚‰ã‚‚ã£ã¨å®¹é‡ãŒå¤§ãã„ã‚‚ã®ã§ã—ãŸã‚‰  
ã‚ˆã‚Šå·®ãŒå¤§ããå‡ºã‚‹ã®ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚  
  
HEIFã®ãƒ¡ãƒªãƒƒãƒˆã¯å®¹é‡ã®å‰Šæ¸›ã‚‚ãã†ã§ã™ãŒ  
ç”»åƒç·¨é›†ã‚„ç”»åƒä»¥å¤–ã®æƒ…å ±ã‚‚ä¸€ç·’ã«ä¿å­˜ã§ãã‚‹ãªã©  
ã‚ˆã‚Šå¹…åºƒã„ç”¨é€”ã§ä½¿ç”¨ã—ã‚„ã™ããªã£ã¦ã„ã¾ã™ã€‚  
  
ä»Šå¾Œã¯é–“é•ã„ãªãä½¿ç”¨ã™ã‚‹é »åº¦ãŒé«˜ããªã‚‹ã§ã‚ã‚ã†  
HEIFã®ç‰¹å¾´ã‚„ä½¿ã„æ–¹ã‚’å­¦ã³  
ã“ã‚Œã‹ã‚‰ã®é–‹ç™ºã«å‚™ãˆã¦ã„ããŸã„ã§ã™ã­ğŸ˜ƒ  
  
ä½•ã‹é–“é•ã„ãªã©ã”ã–ã„ã¾ã—ãŸã‚‰  
æ•™ãˆã¦ã„ãŸã ã‘ã‚‹ã¨ã†ã‚Œã—ã„ã§ã™ğŸ™‡ğŸ»â€â™‚ï¸  
  
# ä½¿ç”¨ã—ãŸã‚³ãƒ¼ãƒ‰  
  
æœ€å¾Œã«ä»Šå›ä½¿ç”¨ã—ãŸã‚³ãƒ¼ãƒ‰ã‚’ä¸‹è¨˜ã«è¨˜è¼‰ã—ã¾ã™ã€‚  
  
â€» ã‚¨ãƒ©ãƒ¼å‡¦ç†ãªã©ã¯çœç•¥ã—ã¦ã„ã¾ã™  
  
  
### ImagePicker  
  
```swift

final class ImagePickerData: ObservableObject {
    var image: UIImage?
    var extensionName: String
    init(image: UIImage?, extensionName: String) {
        self.image = image
        self.extensionName = extensionName
    }
}

struct ImagePicker: UIViewControllerRepresentable {
    @Binding var isShown: Bool
    @Binding var data: ImagePickerData
    
    class Coordinator: NSObject, UINavigationControllerDelegate, UIImagePickerControllerDelegate {
        @Binding var isShown: Bool
        @Binding var data: ImagePickerData
        init(isShown: Binding<Bool>,
             data: Binding<ImagePickerData>) {
            _isShown = isShown
            _data = data
        }
        
        func imagePickerController(_ picker: UIImagePickerController, didFinishPickingMediaWithInfo info: [UIImagePickerController.InfoKey : Any]) {
            let uiImage = info[.originalImage] as! UIImage
            let imageURL = info[.imageURL] as! URL
            data.image = uiImage
            data.extensionName = imageURL.pathExtension
            isShown = false
        }
        
        func imagePickerControllerDidCancel(_ picker: UIImagePickerController) {
            isShown = false
        }
    }
    
    func makeCoordinator() -> ImagePicker.Coordinator {
        return Coordinator(isShown: $isShown, data: $data)
    }
    
    func makeUIViewController(context: UIViewControllerRepresentableContext<ImagePicker>) -> UIImagePickerController {
        let picker = UIImagePickerController()
        picker.delegate = context.coordinator
        return picker
    }
    
    func updateUIViewController(_ uiViewController: UIImagePickerController, context: UIViewControllerRepresentableContext<ImagePicker>) {
    }
}
```  
  
### ImageCompressor  
  
```swift

import AVFoundation
import UIKit

enum HEICError: Error {
    case heicNotSupported
    case cgImageMissing
    case couldNotFinalize
}

extension UIImage {
    func heicData(compressionQuality: CGFloat) throws -> Data {
        let data = NSMutableData()
        guard let imageDestination =
            CGImageDestinationCreateWithData(
                data, AVFileType.heic as CFString, 1, nil
            )
            else {
                throw HEICError.heicNotSupported
        }
        
        guard let cgImage = self.cgImage else {
            throw HEICError.cgImageMissing
        }
        
        let options: NSDictionary = [
            kCGImageDestinationLossyCompressionQuality: compressionQuality
        ]
        
        CGImageDestinationAddImage(imageDestination, cgImage, options)
        guard CGImageDestinationFinalize(imageDestination) else {
            throw HEICError.couldNotFinalize
        }
        return data as Data
    }
}

extension Data {
    var prettySize: String {
        let formatter = ByteCountFormatter()
        formatter.countStyle = .binary
        return formatter.string(fromByteCount: Int64(count))
    }
}


struct CompressedResult {
    let data: Data
    let size: String
    let elapsedTime: String?
}

final class ImageCompressor {
    private let numberFormatter: NumberFormatter = {
        let formatter = NumberFormatter()
        formatter.maximumSignificantDigits = 1
        formatter.maximumFractionDigits = 3
        return formatter
    }()
    private let compressionQueue = OperationQueue()
    
    func compressJPGImage(_ image: UIImage, quality: CGFloat, completion: @escaping (CompressedResult?) -> Void) {
        let startDate = Date()
        compressionQueue.addOperation {
            guard let data = image.jpegData(compressionQuality: quality) else {
                completion(nil)
                return
            }
            let time = self.elapsedTime(from: startDate)
            DispatchQueue.main.async {
                completion(CompressedResult(data: data, size: data.prettySize, elapsedTime: time))
            }
        }
    }
    
    func compressHEICImage(_ image: UIImage, quality: CGFloat, completion: @escaping (CompressedResult?) -> Void) {
        let startDate = Date()
        compressionQueue.addOperation {
            do {
                let data = try image.heicData(compressionQuality: quality)
                let time = self.elapsedTime(from: startDate)
                DispatchQueue.main.async {
                    completion(CompressedResult(data: data, size: data.prettySize, elapsedTime: time))
                }
            } catch {
                print("Error creating HEIC data: \(error.localizedDescription)")
                completion(nil)
            }
        }
    }
    
    private func elapsedTime(from startDate: Date) -> String? {
        let endDate = Date()
        let interval = endDate.timeIntervalSince(startDate)
        let intervalNumber = NSNumber(value: interval)
        return numberFormatter.string(from: intervalNumber)
    }
    
    func cancel() {
        compressionQueue.cancelAllOperations()
    }
}
```  
  
### ContentView  
  
```swift

import SwiftUI

final class ImageViewData: ObservableObject {
    var image: UIImage?
    var extensionName: String
    var elapsedTime: String
    var dataSize: String
    init(image: UIImage? = nil,
         extensionName: String = "-",
         elapsedTime: String = "-",
         dataSize: String = "-") {
        self.image = image
        self.extensionName = extensionName
        self.elapsedTime = elapsedTime
        self.dataSize = dataSize
    }
}

struct ContentView: View {
    @State var isShown = false
    @State var quality: CGFloat = 1
    @State var selectedData: ImagePickerData = ImagePickerData(image: nil, extensionName: "")
    @State var originalImageData = ImageViewData()
    @State var heicImageData = ImageViewData(extensionName: "HEIC")

    private var compressor = ImageCompressor()
    private var formattedQuality: String {
        let rounded = round(quality*10)/10
        return String(rounded.description.prefix(3))
    }
    
    var body: some View {
        VStack(alignment: HorizontalAlignment.center, spacing: 24) {
            Text("å†™çœŸã‚’é¸æŠã—ã¦ãã ã•ã„")
            Button(action: {
                self.isShown = true
            }) { Text("ç”»åƒã‚’é¸æŠ") }
            HStack(alignment: VerticalAlignment.center, spacing: 24) {
                VStack(alignment: HorizontalAlignment.center, spacing: 12) {
                    Text("Original")
                    ImageView(data: $originalImageData, quality: $quality)
                }
                VStack(alignment: HorizontalAlignment.center, spacing: 12) {
                    Text("HEIC")
                    ImageView(data: $heicImageData, quality: $quality)
                }
            }
            .padding()
            Slider(value: $quality)
                .padding()
            Text("Compression Quality: \(formattedQuality)")
            Button(action: { self.compress() }) { Text("åœ§ç¸®ã™ã‚‹") }
        }
        .sheet(isPresented: $isShown, onDismiss: {
            self.isShown = false
            self.compress()
        }, content: {
            ImagePicker(isShown: self.$isShown,
                        data: self.$selectedData)
        })
    }
    
    private func compress() {
        guard let image = self.selectedData.image else {
            return
        }
        self.compressor.cancel()
        self.compressor.compressJPGImage(image, quality: self.quality) {
            if let result = $0 {
                self.originalImageData = ImageViewData(
                    image: UIImage(data: result.data),
                    extensionName: self.selectedData.extensionName,
                    elapsedTime: result.elapsedTime ?? "",
                    dataSize: result.size)
            } else {
                self.originalImageData = ImageViewData()
            }
        }
        self.compressor.compressHEICImage(image, quality: self.quality) {
                if let result = $0 {
                    self.heicImageData = ImageViewData(
                        image: UIImage(data: result.data),
                        extensionName: "HEIC",
                        elapsedTime: result.elapsedTime ?? "",
                        dataSize: result.size)
                } else {
                    self.heicImageData = ImageViewData()
                }
        }
    }
}
```  
  
# å‚è€ƒè³‡æ–™  
  
https://www.raywenderlich.com/4726843-heic-image-compression-for-ios  
